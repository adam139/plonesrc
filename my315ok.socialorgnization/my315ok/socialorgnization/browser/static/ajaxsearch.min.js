function closeEventMore(){$("#cata_more_div").hide();$("#address_more_div").hide()}function innerMoreArea(){var a=$("#ajaxmorearea").attr("data-ajax-target");$.post(a,{demo:2},function(a){try{$("#addressSearchMore1").html(""),$(a.provincelist).appendTo("#province_list_div"),$("#li_province_more").hide()}catch(b){alert(b)}},"json")}
function closeSearchEventsDiv(a){1==a?($("#dateSearch").val("0"),$("#dateRangeSearchUl > .over").removeClass("over"),$("#dateRangeSearchUl").find("li[name='0']").addClass("over"),searchEvent()):2==a?($("#addressSearch").val("0"),$("#addressSelectSearch li> .over").removeClass("over"),$("#addressSelectSearch").find("li span[name='0']").addClass("over"),searchEvent()):3==a&&($("#categorySearch").val("0"),$("#categorySelectSearch li> .over").removeClass("over"),$("#categorySelectSearch").find("li span[name='0']").addClass("over"),
searchEvent())}function searchEventParent(){searchEvent()}$.extend({getUrlVars:function(){for(var a=[],d,b=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),e=0;e<b.length;e++)d=b[e].split("="),a.push(d[0]),a[d[0]]=d[1];return a},getUrlVar:function(a){return $.getUrlVars()[a]}});
var searchEvent=function(a,d,b){var e;e=void 0!==b&&""!==b?b:$("#searchKeyword").val();var c=$("#dateSearch").val(),f=$("#addressSearch").val(),g=$("#categorySearch").val(),h=$("#solrSortColumn").val(),k=$("#solrSortDirection").val();b={datetype:c,province:f,type:g};b.sortcolumn=h;b.sortdirection=k;b.searchabletext=void 0===e||null===e||""===e?"":e;void 0!==a&&""!==a?(b.start=0<a?(a-1)*d:0,b.size=d):(b.start=0,b.size=10);a=$("#ajaxsearch").attr("data-ajax-target");$.post(a,b,function(a){try{showSearchEventResult(a,
!0,e),showResultRemind(e,c,f,g)}catch(b){alert(b)}},"json")},totalCountSearchEvent=0,showSearchEventResult=function(a,d,b){d="";b=parseInt(a.size,10);var e=parseInt(a.start,10),c=parseInt(a.total,10);totalCountSearchEvent=c;0<(e+b>c?c-e:b)?(generatePageLink(e,b,c),d+=a.searchresult):(document.getElementById("bottomPageId").innerHTML="",d+='<tr class="div_tip"><td class="alert alert-block span12" colspan="7">\u8b66\u544a\uff01\uff1a\u6ca1\u6709\u641c\u7d22\u5230\u60a8\u8981\u627e\u7684\u4fe1\u606f\u3002</td></tr>');
$("#searchResultDiv").html(d)};
function showResultRemind(a,d,b,e){var c="";""!==a||"0"==d&&"0"==b&&"0"==e?""===a||"0"==d&&"0"==b&&"0"==e||(c=createStringSearch(a,d,b,e)):c=createStringSearch(a,d,b,e);""===a&&"0"==d&&"0"==b&&"0"==e&&(c="<li class='a'>\u5df2\u9009\u62e9\uff1a</li><li id='show_site_result'></li><li class='info' id='searchresultinfor'>\u201c<span id='keyworkshow'>\u6240\u6709</span>\u201d\u7684\u793e\u4f1a\u7ec4\u7ec7\u4fe1\u606f\u6709\u201c<span id='searchresult_count'>"+totalCountSearchEvent+"</span>\u201d\u6761\uff01</li>");
""!==a&&"0"==d&&"0"==b&&"0"==e&&(c="<li class='a'>\u5df2\u9009\u62e9\uff1a</li><li id='show_site_result'></li><li class='info' id='searchresultinfor'>\u6709\u5173\u201c<span id='keyworkshow'>"+a+"</span>\u201d\u7684\u793e\u4f1a\u7ec4\u7ec7\u4fe1\u606f\u6709\u201c<span id='searchresult_count'>"+totalCountSearchEvent+"</span>\u201d\u6761\uff01</li>");$("#all_result_recordinfo").html(c)}
var generatePageLink=function(a,d,b){var e=$("#bottomPageId");b=Math.floor(b/d)+(0===b%d?0:1);0===b&&(b=1);a=Math.floor(a/d)+1;d=$("#fastPageList");d.html("");var c="",f="";$("#searchtext").val();1>=a?(f+="<a href='javascript:void(0)'><img src='++resource++my315ok.socialorgnization/event_list_bg10.png'/></a>",c+="<a href='javascript:void(0)' class='page'>\u9996\u9875</a><a href='javascript:void(0)' class='page'>\u4e0a\u4e00\u9875</a>"):(f+="<a href='javascript:searchEvent("+(a-1)+",10)'><img src='++resource++my315ok.socialorgnization/event_list_bg10.png'/></a>",
c+="<a href=javascript:searchEvent(1,10) class='page'>\u9996\u9875</a><a href=javascript:searchEvent("+(a-1)+",10) class='page'>\u4e0a\u4e00\u9875</a>");var f=f+("<span>"+a+"/"+b+"</span>"),g=1,h=3;1==a?(g=1,h=a+2,h>=b&&(h=b)):a==b?(g=b-2,0>=g&&(g=1),h=b):(g=a-1,h=a+1);for(;g<=h;g++)c=a==g?c+("<a href='#' class='page_over num active'>"+g+"</a>"):c+("<a href=javascript:searchEvent("+g+",10) class='page num'>"+g+"</a>");a==b||2>b?(f+="<a href='javascript:void(0)'><img src='++resource++my315ok.socialorgnization/event_list_bg11.png'/></a>",
c+="<a href='javascript:void(0)' class='page'>\u4e0b\u4e00\u9875</a>",c+="<a href='javascript:void(0)' class='page'>\u672b\u9875</a>"):(f+="<a href='javascript:searchEvent("+(a+1)+",10)'><img src='++resource++my315ok.socialorgnization/event_list_bg11.png'/></a>",c+="<a href=javascript:searchEvent("+(a+1)+",10) class='page'>\u4e0b\u4e00\u9875</a><a href=javascript:searchEvent("+b+",10) class='page'>\u672b\u9875</a>");e.html(c);d.html(f)};
function createStringSearch(a,d,b,e){var c="<li class='a'>\u5df2\u9009\u62e9\uff1a</li><li id='show_site_result'>";switch(d){case "1":c+="<div class='select'  onclick=\"closeSearchEventsDiv(1)\" >\u65f6\u95f4\uff1a<span id='search_site_desc' style='cursor: pointer;vertical-align: middle;'>\u6700\u8fd1\u4e00\u5468 </span></div>";break;case "2":c+="<div class='select'  onclick=\"closeSearchEventsDiv(1)\" >\u65f6\u95f4\uff1a<span  style='cursor: pointer;vertical-align: middle;'>\u6700\u8fd1\u4e00\u6708 </span></div>";
break;case "3":c+="<div class='select' onclick=\"closeSearchEventsDiv(1)\">\u65f6\u95f4\uff1a<span  style='cursor: pointer;vertical-align: middle;'>\u6700\u8fd1\u4e00\u5e74 </span></div>";break;case "4":c+="<div class='select' onclick=\"closeSearchEventsDiv(1)\">\u65f6\u95f4\uff1a<span style='cursor: pointer;vertical-align: middle;'>30\u5929\u5185 </span></div>";break;case "5":c+="<div class='select' onclick=\"closeSearchEventsDiv(1)\">\u65f6\u95f4\uff1a<span style='cursor: pointer;vertical-align: middle;'>30\u5929\u540e </span></div>"}d=
"";"0"!=b&&(d=$(document.getElementById("addressSelectSearch")).find("span[name='"+b+"'] a").html(),c+="<div class='select' onclick=\"closeSearchEventsDiv(2)\">\u516c\u544a\u7c7b\u522b\uff1a<span style='cursor: pointer;vertical-align: middle;' >"+d+" </span></div>");b="";"0"!=e&&(b=$(document.getElementById("categorySelectSearch")).find("span[name='"+e+"'] a").html(),c+="<div class='select' onclick=\"closeSearchEventsDiv(3)\">\u5206\u7c7b\uff1a<span style='cursor: pointer;vertical-align: middle;' >"+
b+" </span></div>");return c=""===a?c+("</li><li class='info' id='searchresultinfor'>\u7684\u4fe1\u606f\u6709\u201c<span id='searchresult_count'>"+totalCountSearchEvent+"</span>\u201d\u6761\uff01</li>"):c+("</li><li class='info' id='searchresultinfor'>\u4e2d\u6709\u5173\u201c<span>"+a+"</span>\u201d\u7684\u4fe1\u606f\u6709\u201c<span id='searchresult_count'>"+totalCountSearchEvent+"</span>\u201d\u6761\uff01</li>")}
$(document).ready(function(){var a=$.getUrlVar("orgname");void 0!==a&&null!=a&&""!==a&&(a=decodeURIComponent(a),$("#searchKeyword").val(a));searchEvent();$("#dateRangeSearchUl li").live("click",function(){"title"!=$(this).attr("class")&&($("#dateRangeSearchUl > .over").removeClass("over"),$(this).addClass("over"),$("#dateSearch").attr("value",$(this).attr("name")),searchEvent());return!1});$("#addressSelectSearch li span").live("click",function(){"title"!=$(this).attr("class")&&"more"!=$(this).attr("class")&&
($("#addressSelectSearch li> .over").removeClass("over"),$(this).addClass("over"),$("#addressSearch").attr("value",$(this).attr("name")),searchEvent());return!1});$("#categorySelectSearch li span").live("click",function(){"title"!=$(this).attr("class")&&"more"!=$(this).attr("class")&&($("#categorySelectSearch li> .over").removeClass("over"),$(this).addClass("over"),$("#categorySearch").attr("value",$(this).attr("name")),searchEvent());return!1});$("#eventListSort a").live("click",function(){$("#solrSortColumn").attr("value",
$(this).attr("name"));"a"==$(this).attr("class")?($(this).attr("class","b"),$("#solrSortDirection").attr("value","ascending")):($(this).attr("class","a"),$("#solrSortDirection").attr("value","reverse"));searchEvent();return!1});$("#eventListSort a").live("click",function(){$("#eventListSort > .over").removeClass("over");$("#eventListSort a").attr("style","");$(this).attr("style","font-weight:bold;color:#279006;");return!1})});
